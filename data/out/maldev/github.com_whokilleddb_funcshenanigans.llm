Title:
FuncShenanigans

Type:
GitHub Tool

Short Summary (4–8 sentences max):
- FuncShenanigans is a Windows-focused C research/PoC repo exploring “function fluctuation”: keeping a single function’s code encrypted/garbled in memory until execution time, then restoring it briefly.  
- It solves the problem of minimizing in-memory exposure of sensitive code by confining a target function to a dedicated 4KB page and toggling page protections to control access.  
- The repo demonstrates two main experiments: (1) using a Vectored Exception Handler (VEH) to replace a function’s body with shellcode on an access violation, and (2) encrypting/decrypting the function on-demand via VEH plus timer-queue callbacks.  
- Core techniques include page-aligned function bounding, `VirtualProtect` permission flips (RW/RX/NOACCESS), XOR-based transformation, and exception-driven control flow (`EXCEPTION_ACCESS_VIOLATION`).  
- Useful for red teamers, malware developers, and security researchers studying evasive in-memory execution patterns and Windows exception/protection mechanics.  
- Interesting because it applies “fluctuation” at function granularity (not whole shellcode/PE), highlighting practical constraints like page boundaries and side effects of tampering code pages.

Technical Focus:
- Function/page bounding via alignment and boundary marker functions
- Vectored Exception Handling (AddVectoredExceptionHandler) for execution gating
- Memory protection manipulation with `VirtualProtect` (PAGE_NOACCESS, PAGE_EXECUTE_READ, PAGE_READWRITE)
- Self-modifying code / runtime code replacement (`WriteProcessMemory`)
- Timer-queue based re-encryption (`CreateTimerQueue`, `CreateTimerQueueTimer`)
- Basic in-memory encryption/obfuscation (XOR transform)

Use Cases:
- Implementing on-demand decryption of a sensitive routine to reduce static memory scanning exposure
- Experimenting with exception-driven execution flow and code-page permission traps
- Prototyping function-level code swapping (benign-to-payload) at runtime
- Studying detection opportunities around frequent `VirtualProtect` flips, VEH registration, and timer-queue callbacks

Keywords:
Windows, C, MinGW, Vectored Exception Handler, VEH, AddVectoredExceptionHandler, EXCEPTION_ACCESS_VIOLATION, VirtualProtect, PAGE_NOACCESS, PAGE_EXECUTE_READ, PAGE_READWRITE, WriteProcessMemory, VirtualQuery, CreateTimerQueue, CreateTimerQueueTimer, self-modifying code, code encryption, XOR, page alignment, memory pages, shellcode fluctuation