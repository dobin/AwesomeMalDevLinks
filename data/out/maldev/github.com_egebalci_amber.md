# https://github.com/EgeBalci/amber

[Skip to content](https://github.com/EgeBalci/amber#start-of-content)

You signed in with another tab or window. [Reload](https://github.com/EgeBalci/amber) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/EgeBalci/amber) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/EgeBalci/amber) to refresh your session.Dismiss alert

{{ message }}

[EgeBalci](https://github.com/EgeBalci)/ **[amber](https://github.com/EgeBalci/amber)** Public

- [Notifications](https://github.com/login?return_to=%2FEgeBalci%2Famber) You must be signed in to change notification settings
- [Fork\\
225](https://github.com/login?return_to=%2FEgeBalci%2Famber)
- [Star\\
1.4k](https://github.com/login?return_to=%2FEgeBalci%2Famber)


Reflective PE packer.


### License

[MIT license](https://github.com/EgeBalci/amber/blob/master/LICENSE)

[1.4k\\
stars](https://github.com/EgeBalci/amber/stargazers) [225\\
forks](https://github.com/EgeBalci/amber/forks) [Branches](https://github.com/EgeBalci/amber/branches) [Tags](https://github.com/EgeBalci/amber/tags) [Activity](https://github.com/EgeBalci/amber/activity)

[Star](https://github.com/login?return_to=%2FEgeBalci%2Famber)

[Notifications](https://github.com/login?return_to=%2FEgeBalci%2Famber) You must be signed in to change notification settings

# EgeBalci/amber

master

[**2** Branches](https://github.com/EgeBalci/amber/branches) [**4** Tags](https://github.com/EgeBalci/amber/tags)

[Go to Branches page](https://github.com/EgeBalci/amber/branches)[Go to Tags page](https://github.com/EgeBalci/amber/tags)

Go to file

Code

Open more actions menu

## Folders and files

| Name | Name | Last commit message | Last commit date |
| --- | --- | --- | --- |
| ## Latest commit<br>[![EgeBalci](https://avatars.githubusercontent.com/u/17179401?v=4&size=40)](https://github.com/EgeBalci)[EgeBalci](https://github.com/EgeBalci/amber/commits?author=EgeBalci)<br>[SGN version updated.](https://github.com/EgeBalci/amber/commit/f6eb2dc4b4b1a408d23ad376b16ac0c9a7b4c54d)<br>2 years agoFeb 22, 2024<br>[f6eb2dc](https://github.com/EgeBalci/amber/commit/f6eb2dc4b4b1a408d23ad376b16ac0c9a7b4c54d) · 2 years agoFeb 22, 2024<br>## History<br>[256 Commits](https://github.com/EgeBalci/amber/commits/master/) <br>Open commit details<br>[View commit history for this file.](https://github.com/EgeBalci/amber/commits/master/) 256 Commits |
| [.github](https://github.com/EgeBalci/amber/tree/master/.github ".github") | [.github](https://github.com/EgeBalci/amber/tree/master/.github ".github") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [.vscode](https://github.com/EgeBalci/amber/tree/master/.vscode ".vscode") | [.vscode](https://github.com/EgeBalci/amber/tree/master/.vscode ".vscode") | [v3.0 Stable Release !!!](https://github.com/EgeBalci/amber/commit/4f69ba1c2248cb21c0ad075104fbf7caed8fc699 "v3.0 Stable Release !!!") | 6 years agoNov 26, 2020 |
| [config](https://github.com/EgeBalci/amber/tree/master/config "config") | [config](https://github.com/EgeBalci/amber/tree/master/config "config") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [loader](https://github.com/EgeBalci/amber/tree/master/loader "loader") | [loader](https://github.com/EgeBalci/amber/tree/master/loader "loader") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [pkg](https://github.com/EgeBalci/amber/tree/master/pkg "pkg") | [pkg](https://github.com/EgeBalci/amber/tree/master/pkg "pkg") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [stub](https://github.com/EgeBalci/amber/tree/master/stub "stub") | [stub](https://github.com/EgeBalci/amber/tree/master/stub "stub") | [v3.0 Stable Release !!!](https://github.com/EgeBalci/amber/commit/4f69ba1c2248cb21c0ad075104fbf7caed8fc699 "v3.0 Stable Release !!!") | 6 years agoNov 26, 2020 |
| [utils](https://github.com/EgeBalci/amber/tree/master/utils "utils") | [utils](https://github.com/EgeBalci/amber/tree/master/utils "utils") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [.gitignore](https://github.com/EgeBalci/amber/blob/master/.gitignore ".gitignore") | [.gitignore](https://github.com/EgeBalci/amber/blob/master/.gitignore ".gitignore") | [v3.0 Stable Release !!!](https://github.com/EgeBalci/amber/commit/4f69ba1c2248cb21c0ad075104fbf7caed8fc699 "v3.0 Stable Release !!!") | 6 years agoNov 26, 2020 |
| [.gitmodules](https://github.com/EgeBalci/amber/blob/master/.gitmodules ".gitmodules") | [.gitmodules](https://github.com/EgeBalci/amber/blob/master/.gitmodules ".gitmodules") | [Added submodules](https://github.com/EgeBalci/amber/commit/7b15b92f64b4dd4dd8b377c6b2ce5a2e3869297a "Added submodules") | 6 years agoDec 23, 2020 |
| [Dockerfile](https://github.com/EgeBalci/amber/blob/master/Dockerfile "Dockerfile") | [Dockerfile](https://github.com/EgeBalci/amber/blob/master/Dockerfile "Dockerfile") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [LICENSE](https://github.com/EgeBalci/amber/blob/master/LICENSE "LICENSE") | [LICENSE](https://github.com/EgeBalci/amber/blob/master/LICENSE "LICENSE") | [Initial commit](https://github.com/EgeBalci/amber/commit/e1f679fd5406089c2951e79ca7b0a195ce585f0a "Initial commit") | 9 years agoMay 30, 2017 |
| [Makefile](https://github.com/EgeBalci/amber/blob/master/Makefile "Makefile") | [Makefile](https://github.com/EgeBalci/amber/blob/master/Makefile "Makefile") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [README.md](https://github.com/EgeBalci/amber/blob/master/README.md "README.md") | [README.md](https://github.com/EgeBalci/amber/blob/master/README.md "README.md") | [Amber v3.2 release.](https://github.com/EgeBalci/amber/commit/fae3275b688b4d60df559b3e1afa80189c009987 "Amber v3.2 release.  - Major loader update!   - Added TLS callback support   - Added forwarded imports support   - Removed GetProcAddress and LoadLibrary WinAPI usage   - Switched to NTDLL WinApi functions   - Wiper code improved - Added lite loader option for appending PE files on the fly! - Added experimental raw syscall loader - Added static build flags in makefile - File name bug fixed - Dockerfile updated - Github workflows added - README updated") | 3 years agoJun 24, 2023 |
| [go.mod](https://github.com/EgeBalci/amber/blob/master/go.mod "go.mod") | [go.mod](https://github.com/EgeBalci/amber/blob/master/go.mod "go.mod") | [SGN version updated.](https://github.com/EgeBalci/amber/commit/f6eb2dc4b4b1a408d23ad376b16ac0c9a7b4c54d "SGN version updated.") | 2 years agoFeb 22, 2024 |
| [go.sum](https://github.com/EgeBalci/amber/blob/master/go.sum "go.sum") | [go.sum](https://github.com/EgeBalci/amber/blob/master/go.sum "go.sum") | [SGN version updated.](https://github.com/EgeBalci/amber/commit/f6eb2dc4b4b1a408d23ad376b16ac0c9a7b4c54d "SGN version updated.") | 2 years agoFeb 22, 2024 |
| [main.go](https://github.com/EgeBalci/amber/blob/master/main.go "main.go") | [main.go](https://github.com/EgeBalci/amber/blob/master/main.go "main.go") | [SGN version updated.](https://github.com/EgeBalci/amber/commit/f6eb2dc4b4b1a408d23ad376b16ac0c9a7b4c54d "SGN version updated.") | 2 years agoFeb 22, 2024 |
| View all files |

## Repository files navigation

[![](https://github.com/EgeBalci/amber/raw/master/.github/img/banner.png)](https://github.com/EgeBalci/amber/blob/master/.github/img/banner.png)

[![](https://camo.githubusercontent.com/5394dcfe1f7bd1a223f12eaf024f9d925171772cc5427a5c628caa6a7ea2a2ee/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f76657273696f6e2d332e322e302d677265656e2e7376673f7374796c653d666c61742d737175617265)](https://github.com/EgeBalci/amber)[![](https://camo.githubusercontent.com/f45eb570d51d3b0f387835d37e5577652caf851b7cb0226c18d957e76b83faad/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f65676562616c63692f616d6265723f7374796c653d666c61742d737175617265)](https://goreportcard.com/report/github.com/egebalci/amber)[![](https://camo.githubusercontent.com/5be671c1fbd7a25907dabfa0a893c55db26e191952232768898f60cd407af76f/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f65676562616c63692f616d6265723f7374796c653d666c61742d73717561726526636f6c6f723d726564)](https://github.com/EgeBalci/amber/issues)[![](https://camo.githubusercontent.com/011b1e93f8777498793a331d0fd3eb1b7692687c7a85e7d90190c429a94f4d2d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f65676562616c63692f616d6265722e7376673f7374796c653d666c61742d737175617265)](https://raw.githubusercontent.com/EgeBalci/sgn/master/LICENSE)[![](https://camo.githubusercontent.com/2f011d9d5a3e99810faf27cc7ad4646a2455fe588564377dba7e080859051e08/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f747769747465722d40656765626c632d3535616365652e7376673f7374796c653d666c61742d737175617265)](https://twitter.com/egeblc)

# Inroduction

[Permalink: Inroduction](https://github.com/EgeBalci/amber#inroduction)

Amber is a position-independent(reflective) PE loader that enables in-memory execution of native PE files(EXE, DLL, SYS...). It enables stealthy in-memory payload deployment that can be used to bypass anti-virus, firewall, IDS, IPS products, and application white-listing mitigations. Reflective payloads generated by Amber can either be staged from a remote server or executed directly in memory much like a generic shellcode. By default, every generated payload is encoded using the new generation [SGN encoder](https://github.com/EgeBalci/sgn). Amber uses [CRC32\_API](https://github.com/EgeBalci/crc32_api) and [IAT\_API](https://github.com/EgeBalci/iat_api) for inconspicuously resolving the Windows API function addresses. After the PE file is loaded and executed in memory, the reflective payload is erased for evading memory scanners.

# Installation

[Permalink: Installation](https://github.com/EgeBalci/amber#installation)

Pre-compiled binaries can be found under [releases](https://github.com/EgeBalci/amber/releases).

_**Building From Source**_

The only dependency for building the source is the [keystone engine](https://github.com/keystone-engine/keystone), follow [these](https://github.com/keystone-engine/keystone/blob/master/docs/COMPILE.md) instructions for installing the library. Once libkeystone is installed on the system, simply just go get it ツ

```
go install github.com/EgeBalci/amber@latest
```

_**Docker Install**_

[![Docker](https://camo.githubusercontent.com/923bdcbc0647ab646cc383e9fdf030519a09a4fe0e61c133b7737212ef70f112/687474703a2f2f646f636b6572692e636f2f696d6167652f656765652f616d626572)](https://hub.docker.com/r/egee/amber/)

```
docker pull egee/amber
docker run -it egee/amber
```

# Usage

[Permalink: Usage](https://github.com/EgeBalci/amber#usage)

[![](https://github.com/EgeBalci/amber/raw/master/.github/img/usage.gif)](https://github.com/EgeBalci/amber/blob/master/.github/img/usage.gif)[![usage.gif](https://github.com/EgeBalci/amber/raw/master/.github/img/usage.gif)](https://github.com/EgeBalci/amber/blob/master/.github/img/usage.gif)[Open usage.gif in new window](https://github.com/EgeBalci/amber/blob/master/.github/img/usage.gif)

The following table lists switches supported by the amber.

| Switch | Type | Description |
| --- | --- | --- |
| **-f,--file** | string | Input PE file. |
| **-o,--out** | string | Output binary payload file name. |
| **-e** | int | Number of times to encode the generated reflective payload |
| **--iat** | bool | Use IAT API resolver block instead of CRC API resolver block |
| **-l** | int | Maximum number of bytes for obfuscation (default 5) |
| **--sys** | bool | Perform raw syscalls. (only x64) |
| **--scrape** | bool | Scrape magic byte and DOS stub from PE. |

**Example Usage**

- Generate reflective payload.

```
amber -f test.exe
```

- Generate reflective payload with IAT API resolver and encode the final payload 10 times.

```
amber -e 10 --iat -f test.exe
```

_**Docker Usage**_

```
docker run -it -v /tmp/:/tmp/ amber -f /tmp/file.exe
```

# Demo

[Permalink: Demo](https://github.com/EgeBalci/amber#demo)

- [NOPcon 2018 DEMO](https://www.youtube.com/watch?v=lCPdKSH6RMc)
- [Pentest.blog - Deploying Reflective PE Files With Metasploit](https://www.youtube.com/watch?v=3en0ftnjEpE)
- [Pentest.blog - Deploying Reflective Ransomware POC](https://www.youtube.com/watch?v=JVv_spX6D4U)

## About

Reflective PE packer.


### Topics

[packer](https://github.com/topics/packer "Topic: packer") [assembly](https://github.com/topics/assembly "Topic: assembly") [stub](https://github.com/topics/stub "Topic: stub") [shellcode](https://github.com/topics/shellcode "Topic: shellcode") [pe](https://github.com/topics/pe "Topic: pe") [amber](https://github.com/topics/amber "Topic: amber") [payload](https://github.com/topics/payload "Topic: payload") [crypter](https://github.com/topics/crypter "Topic: crypter") [shellcode-loader](https://github.com/topics/shellcode-loader "Topic: shellcode-loader")

### Resources

[Readme](https://github.com/EgeBalci/amber#readme-ov-file)

### License

[MIT license](https://github.com/EgeBalci/amber#MIT-1-ov-file)

### Uh oh!

There was an error while loading. [Please reload this page](https://github.com/EgeBalci/amber).

[Activity](https://github.com/EgeBalci/amber/activity)

### Stars

[**1.4k**\\
stars](https://github.com/EgeBalci/amber/stargazers)

### Watchers

[**45**\\
watching](https://github.com/EgeBalci/amber/watchers)

### Forks

[**225**\\
forks](https://github.com/EgeBalci/amber/forks)

[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FEgeBalci%2Famber&report=EgeBalci+%28user%29)

## [Releases\  4](https://github.com/EgeBalci/amber/releases)

[v3.2\\
Latest\\
\\
on Jun 24, 2023Jun 24, 2023](https://github.com/EgeBalci/amber/releases/tag/v3.2)

[\+ 3 releases](https://github.com/EgeBalci/amber/releases)

## [Packages\  0](https://github.com/users/EgeBalci/packages?repo_name=amber)

No packages published

### Uh oh!

There was an error while loading. [Please reload this page](https://github.com/EgeBalci/amber).

## Languages

- [Go47.9%](https://github.com/EgeBalci/amber/search?l=go)
- [Assembly46.2%](https://github.com/EgeBalci/amber/search?l=assembly)
- [Shell2.8%](https://github.com/EgeBalci/amber/search?l=shell)
- [C2.0%](https://github.com/EgeBalci/amber/search?l=c)
- Other1.1%

You can’t perform that action at this time.