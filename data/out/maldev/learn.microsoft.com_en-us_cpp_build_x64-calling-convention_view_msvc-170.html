# https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170

<!DOCTYPE html><html class="layout layout-holy-grail show-table-of-contents conceptual show-breadcrumb default-focus theme-light" lang="en-us" dir="ltr" data-authenticated="false" data-auth-status-determined="true" data-target="docs" x-ms-format-detection="none" style="--window-inner-height: 100000px !important; --atlas-header-height: 6485px !important; --atlas-footer-height: 418px !important; --atlas-header-visible-height: 6493px !important; --atlas-footer-visible-height: 418px !important;">
	
			<body id="body" data-bi-name="body" class="layout-body " lang="en-us" dir="ltr">
				
				 <section id="layout-body-menu" class="layout-body-menu display-flex" data-bi-name="menu">
					
		<div id="left-container" class="left-container display-none display-block-tablet padding-inline-sm padding-bottom-sm width-full" data-toc-container="true">
			<!-- Regular TOC content (default) -->
			<div id="ms--toc-content" class="height-full">
				
			</div>
			<!-- Collapsible TOC content (hidden by default) -->
			<div id="ms--toc-content-collapsible" class="height-full">
				
			</div>
		</div>
	
			  </section>

				<main id="main" role="main" class="layout-body-main " data-bi-name="content" lang="en-us" dir="ltr">
					
			<div id="ms--content-header" class="content-header default-focus border-bottom-none" data-bi-name="content-header">
		<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
			<button type="button" class="contents-button button button-sm margin-right-xxs" data-bi-name="contents-expand" aria-haspopup="true" data-contents-button="">
				<span class="icon" aria-hidden="true"><span class="docon docon-menu"></span></span>
				<span class="contents-expand-title"> Table of contents </span>
			</button>
			<button type="button" class="ap-collapse-behavior ap-expanded button button-sm" data-bi-name="ap-collapse" aria-controls="action-panel">
				<span class="icon" aria-hidden="true"><span class="docon docon-exit-mode"></span></span>
				<span>Exit editor mode</span>
			</button>
		</div>
	</div>
			<div data-main-column="" class="padding-sm padding-top-none padding-top-sm-tablet">
				<div>
					
		<div id="article-header" class="background-color-body margin-bottom-xs display-none-print">
			<div class="display-flex align-items-center justify-content-space-between">
				
		<details id="article-header-breadcrumbs-overflow-popover" class="popover" data-for="article-header-breadcrumbs">
			<summary class="button button-clear button-primary button-sm inner-focus" aria-label="All breadcrumbs">
				<span class="icon">
					<span class="docon docon-more"></span>
				</span>
			</summary>
			<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none"><!---->
			
			
		<!----></div>
		</details>

		<bread-crumbs id="article-header-breadcrumbs" role="group" aria-label="Breadcrumbs" data-test-id="article-header-breadcrumbs" class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs" style="display: block; white-space: nowrap; overflow: hidden;"><!---->
			
		<!----></bread-crumbs>
	 
		<div id="article-header-page-actions" class="margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch">
			
		<button class="button button-sm border-none inner-focus display-none-tablet flex-shrink-0 " data-bi-name="ask-learn-assistant-entry" data-test-id="ask-learn-assistant-modal-entry-mobile" data-ask-learn-modal-entry="" type="button" style="min-width: max-content;" aria-expanded="false" aria-label="Ask Learn">
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button class="button button-sm display-none display-inline-flex-tablet display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn " data-bi-name="ask-learn-assistant-entry" data-test-id="ask-learn-assistant-modal-entry-tablet" data-ask-learn-modal-entry="" type="button" style="min-width: max-content;" aria-expanded="false">
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn " data-bi-name="ask-learn-assistant-entry" data-test-id="ask-learn-assistant-flyout-entry" data-ask-learn-flyout-entry="" data-flyout-button="toggle" type="button" style="min-width: max-content;" aria-expanded="false" aria-controls="ask-learn-flyout">
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	 
		<button type="button" id="ms--focus-mode-button" data-focus-mode="" data-bi-name="focus-mode-entry" class="button button-sm flex-shrink-0 margin-right-xxs display-none display-inline-flex-desktop">
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-glasses"></span>
			</span>
			<span>Focus mode</span>
		</button>
	 

			<details class="popover popover-right" id="article-header-page-actions-overflow">
				<summary class="justify-content-flex-start button button-clear button-sm button-primary inner-focus" aria-label="More actions" title="More actions">
					<span class="icon" aria-hidden="true">
						<span class="docon docon-more-vertical"></span>
					</span>
				</summary>
				<div class="popover-content">
					
		<button data-page-action-item="overflow-mobile" type="button" class="button-block button-sm inner-focus button button-clear display-none-tablet justify-content-flex-start text-align-left" data-bi-name="contents-expand" data-contents-button="" data-popover-close="">
			<span class="icon">
				<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
			</span>
			<span class="contents-expand-title">Table of contents</span>
		</button>
	 
		<a id="lang-link-overflow" class="button-sm inner-focus button button-clear button-block justify-content-flex-start text-align-left" data-bi-name="language-toggle" data-page-action-item="overflow-all" data-check-hidden="true" data-read-in-link="" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170" data-bi="{&quot;cN&quot;:&quot;language-toggle&quot;,&quot;value&quot;:&quot;off&quot;}">
			<span class="icon" aria-hidden="true" data-read-in-link-icon="">
				<span class="docon docon-locale-globe"></span>
			</span>
			<span data-read-in-link-text="">Read in English</span>
		</a>
	 
		<button type="button" class="collection button button-clear button-sm button-block justify-content-flex-start text-align-left inner-focus" data-list-type="collection" data-bi-name="collection" data-page-action-item="overflow-all" data-check-hidden="true" data-popover-close="" data-pressed="false" title="Add x64 Calling Convention | Microsoft Learn to a collection">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="collection-status">Add to Collections</span>
		</button>
	
					
		<button type="button" class="collection button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus" data-list-type="plan" data-bi-name="plan" data-page-action-item="overflow-all" data-check-hidden="true" data-popover-close="" data-pressed="false" title="Add x64 Calling Convention | Microsoft Learn to a plan">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="plan-status">Add to plan</span>
		</button>
	  
		<a data-contenteditbtn="" class="button button-clear button-block button-sm inner-focus justify-content-flex-start text-align-left text-decoration-none" data-bi-name="edit" href="https://github.com/MicrosoftDocs/cpp-docs/blob/main/docs/build/x64-calling-convention.md" data-original_content_git_url="https://github.com/MicrosoftDocs/cpp-docs-pr/blob/live/docs/build/x64-calling-convention.md" data-original_content_git_url_template="{repo}/blob/{branch}/docs/build/x64-calling-convention.md" data-pr_repo="" data-pr_branch="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-outline"></span>
			</span>
			<span>Edit</span>
		</a>
	
					
		<hr class="margin-block-xxs">
		<h4 class="font-size-sm padding-left-xxs">Share via</h4>
		
					<a class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-facebook" data-bi-name="facebook" data-page-action-item="overflow-all" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fcpp%2Fbuild%2Fx64-calling-convention%3Fview%3Dmsvc-170%26WT.mc_id%3Dfacebook">
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-facebook-share"></span>
						</span>
						<span>Facebook</span>
					</a>

					<a href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fcpp%2Fbuild%2Fx64-calling-convention%3Fview%3Dmsvc-170%26WT.mc_id%3Dtwitter&amp;tw_p=tweetbutton&amp;url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fcpp%2Fbuild%2Fx64-calling-convention%3Fview%3Dmsvc-170%26WT.mc_id%3Dtwitter" class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-twitter" data-bi-name="twitter" data-page-action-item="overflow-all">
						<span class="icon color-text" aria-hidden="true">
							<span class="docon docon-xlogo-share"></span>
						</span>
						<span>x.com</span>
					</a>

					<a href="https://www.linkedin.com/feed/?shareActive=true&amp;text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fcpp%2Fbuild%2Fx64-calling-convention%3Fview%3Dmsvc-170%26WT.mc_id%3Dlinkedin" class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-linkedin" data-bi-name="linkedin" data-page-action-item="overflow-all">
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-linked-in-logo"></span>
						</span>
						<span>LinkedIn</span>
					</a>
					<a href="mailto:?subject=%5BShared%20Article%5D%20x64%20Calling%20Convention%20%7C%20Microsoft%20Learn&amp;body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fcpp%2Fbuild%2Fx64-calling-convention%3Fview%3Dmsvc-170%26WT.mc_id%3Demail" class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-email" data-bi-name="email" data-page-action-item="overflow-all">
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-mail-message"></span>
						</span>
						<span>Email</span>
					</a>
			  
	 
		<hr class="margin-block-xxs">
		
				<button class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus" type="button" data-bi-name="copy-markdown" data-page-action-item="overflow-all" data-copy-markdown="" data-copy-state="idle" data-check-hidden="true">
					<span class="icon color-primary" aria-hidden="true">
						<span data-show-when="idle" class="docon docon-code-lang"></span>
						<span data-show-when="loading" class="loader"></span>
						<span data-show-when="success" class="docon docon-check-mark"></span>
					</span>
					<span>Copy Markdown</span>
				</button>
		   
				<button class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus" type="button" data-bi-name="print" data-page-action-item="overflow-all" data-popover-close="" data-print-page="" data-check-hidden="true">
					<span class="icon color-primary" aria-hidden="true">
						<span class="docon docon-print"></span>
					</span>
					<span>Print</span>
				</button>
		  
	
				</div>
			</details>
		</div>
	
			</div>
		</div>
	  
		<!-- privateUnauthorizedTemplate is hidden by default -->
		<div unauthorized-private-section="" data-bi-name="permission-content-unauthorized-private">
			<hr class="hr margin-top-xs margin-bottom-sm">
			<div class="notification notification-info">
				<div class="notification-content">
					<p class="margin-top-none notification-title">
						<span class="icon">
							<span class="docon docon-exclamation-circle-solid" aria-hidden="true"></span>
						</span>
						<span>Note</span>
					</p>
					<p class="margin-top-none authentication-determined not-authenticated">
						Access to this page requires authorization. You can try <a class="docs-sign-in" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#" data-bi-name="permission-content-sign-in">signing in</a> or <a class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
					<p class="margin-top-none authentication-determined authenticated">
						Access to this page requires authorization. You can try <a class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
				</div>
			</div>
		</div>
	
					<div class="content"><h1 id="x64-calling-convention">x64 calling convention</h1></div>
					
		<div id="article-metadata" data-bi-name="article-metadata" data-test-id="article-metadata" class="page-metadata-container display-flex gap-xxs justify-content-space-between align-items-center flex-wrap-wrap">
			 
				<div id="user-feedback" class="margin-block-xxs display-none display-none-print" data-hide-on-archived="">
					
		<button id="user-feedback-button" data-test-id="conceptual-feedback-button" class="button button-sm button-clear button-primary display-none" type="button" data-bi-name="user-feedback-button" data-user-feedback-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-like"></span>
			</span>
			<span>Feedback</span>
		</button>
	
				</div>
		  
		</div>
	 
		<div data-id="ai-summary">
			<div id="ms--ai-summary-cta" class="margin-top-xs display-flex align-items-center">
				<span class="icon" aria-hidden="true">
					<span class="docon docon-sparkle-fill gradient-text-vivid"></span>
				</span>
				<button id="ms--ai-summary" type="button" class="tag tag-sm tag-suggestion margin-left-xxs" data-test-id="ai-summary-cta" data-bi-name="ai-summary-cta" data-an="ai-summary">
					<span class="ai-summary-cta-text">
						Summarize this article for me
					</span>
				</button>
			</div>
			<!-- Slot where the client will render the summary card after the user clicks the CTA -->
			<div id="ms--ai-summary-header" class="margin-top-xs"></div>
		</div>
	 
		
	
					<div class="content"><p>This article describes the standard processes and conventions that one function (the caller) uses to make calls into another function (the callee) in x64 code.</p>
<p>For more information about the <code>__vectorcall</code> calling convention, see <a href="https://learn.microsoft.com/en-us/cpp/cpp/vectorcall?view=msvc-170" data-linktype="relative-path">__vectorcall</a>.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#calling-convention-defaults" aria-label="Section titled: Calling convention defaults"></a><h2 id="calling-convention-defaults" class="heading-anchor">Calling convention defaults</h2></div>
<p>The x64 Application Binary Interface (ABI) uses a four-register, fast-call calling convention by default. Space is allocated on the call stack as a shadow store for callees to save those registers.</p>
<p>There's a strict one-to-one correspondence between a function call's arguments and the registers used for those arguments. Any argument that doesn't fit in 8 bytes, or isn't 1, 2, 4, or 8 bytes, must be passed by reference. A single argument is never spread across multiple registers.</p>
<p>The x87 register stack is unused. It might be used by the callee, but consider it volatile across function calls. All floating point operations are done using the 16 XMM registers.</p>
<p>Integer arguments are passed in registers RCX, RDX, R8, and R9. Floating point arguments are passed in XMM0L, XMM1L, XMM2L, and XMM3L. 16-byte arguments are passed by reference. Parameter passing is described in detail in <a href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#parameter-passing" data-linktype="self-bookmark">Parameter passing</a>. These registers, and RAX, R10, R11, XMM4, and XMM5, are considered <em>volatile</em>, or potentially changed by a callee on return. Register usage is documented in detail in <a href="https://learn.microsoft.com/en-us/cpp/build/x64-software-conventions?view=msvc-170#x64-register-usage" data-linktype="relative-path">x64 register usage</a> and <a href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#callercallee-saved-registers" data-linktype="self-bookmark">Caller/callee saved registers</a>.</p>
<p>For prototyped functions, all arguments are converted to the expected callee types before passing. The caller is responsible for allocating space for the callee's parameters. The caller must always allocate sufficient space to store four register parameters, even if the callee doesn't take that many parameters. This convention simplifies support for unprototyped C-language functions and vararg C/C++ functions. For vararg or unprototyped functions, any floating point values must be duplicated in the corresponding general-purpose register. Any parameters beyond the first four must be stored on the stack after the shadow store before the call. Vararg function details can be found in <a href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#varargs" data-linktype="self-bookmark">Varargs</a>. Unprototyped function information is detailed in <a href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#unprototyped-functions" data-linktype="self-bookmark">Unprototyped functions</a>.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#alignment" aria-label="Section titled: Alignment"></a><h2 id="alignment" class="heading-anchor">Alignment</h2></div>
<p>Most structures are aligned to their natural alignment. The primary exceptions are the stack pointer and <code>malloc</code> or <code>alloca</code> memory, which are 16-byte aligned to aid performance. Alignment above 16 bytes must be done manually. Since 16 bytes is a common alignment size for XMM operations, this value should work for most code. For more information about structure layout and alignment, see <a href="https://learn.microsoft.com/en-us/cpp/build/x64-software-conventions?view=msvc-170#x64-type-and-storage-layout" data-linktype="relative-path">x64 type and storage layout</a>. For information about the stack layout, see <a href="https://learn.microsoft.com/en-us/cpp/build/stack-usage?view=msvc-170" data-linktype="relative-path">x64 stack usage</a>.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#unwindability" aria-label="Section titled: Unwindability"></a><h2 id="unwindability" class="heading-anchor">Unwindability</h2></div>
<p>Leaf functions are functions that don't change any nonvolatile registers. A nonleaf function might change nonvolatile RSP, for example, by calling a function. Or, it could change RSP by allocating more stack space for local variables. To recover nonvolatile registers when an exception is handled, nonleaf functions are annotated with static data. The data describes how to properly unwind the function at an arbitrary instruction. This data is stored as <em>pdata</em>, or procedure data, which in turn refers to <em>xdata</em>, the exception handling data. The xdata contains the unwinding information, and can point to additional pdata or an exception handler function.</p>
<p>Prologs and epilogs are highly restricted so that they can be properly described in xdata. The stack pointer must remain 16-byte aligned in any region of code that isn't part of an epilog or prolog, except within leaf functions. Leaf functions can be unwound simply by simulating a return, so pdata and xdata aren't required. For details about the proper structure of function prologs and epilogs, see <a href="https://learn.microsoft.com/en-us/cpp/build/prolog-and-epilog?view=msvc-170" data-linktype="relative-path">x64 prolog and epilog</a>. For more information about exception handling, and the exception handling and unwinding of pdata and xdata, see <a href="https://learn.microsoft.com/en-us/cpp/build/exception-handling-x64?view=msvc-170" data-linktype="relative-path">x64 exception handling</a>.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#parameter-passing" aria-label="Section titled: Parameter passing"></a><h2 id="parameter-passing" class="heading-anchor">Parameter passing</h2></div>
<p>By default, the x64 calling convention passes the first four arguments to a function in registers. The registers used for these arguments depend on the position and type of the argument. Remaining arguments are passed on the stack in right-to-left order. The caller reserves the required stack space and writes these arguments to stack memory using store or move instructions, maintaining 8-byte alignment for each argument.</p>
<p>Integer valued arguments in the leftmost four positions are passed in left-to-right order in RCX, RDX, R8, and R9, respectively. The fifth and higher arguments are passed on the stack as previously described. All integer arguments in registers are right-justified, so the callee can ignore the upper bits of the register and access only the portion of the register necessary.</p>
<p>Any floating-point and double-precision arguments in the first four parameters are passed in XMM0 - XMM3, depending on position. Floating-point values are only placed in the integer registers RCX, RDX, R8, and R9 when there are varargs arguments. For details, see <a href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#varargs" data-linktype="self-bookmark">Varargs</a>. Similarly, the XMM0 - XMM3 registers are ignored when the corresponding argument is an integer or pointer type.</p>
<p><a href="https://learn.microsoft.com/en-us/cpp/cpp/m128?view=msvc-170" data-linktype="relative-path"><code>__m128</code></a> types, arrays, and strings are never passed by immediate value. Instead, a pointer is passed to memory allocated by the caller. Structs and unions of size 8, 16, 32, or 64 bits, and <strong><code>__m64</code></strong> types, are passed as if they were integers of the same size. Structs or unions of other sizes are passed as a pointer to memory allocated by the caller. For these aggregate types passed as a pointer, including <strong><code>__m128</code></strong>, the caller-allocated temporary memory must be 16-byte aligned.</p>
<p>Intrinsic functions that don't allocate stack space, and don't call other functions, sometimes use other volatile registers to pass additional register arguments. This optimization is made possible by the tight binding between the compiler and the intrinsic function implementation.</p>
<p>The callee is responsible for dumping the register parameters into their shadow space if needed.</p>
<p>The following table summarizes how parameters are passed, by type and position from the left:</p>
<div class="buttons buttons-right margin-bottom-none margin-top-sm"><!----> <button class="button button-clear button-sm display-flex gap-xxs">
		<span class="icon" aria-hidden="true">
			<span class="docon docon-expand color-primary"></span>
		</span>
		<span><!---->Expand table<!----></span>
	</button><!----></div><div class="inner-focus"><table aria-label="Table 1" class="table table-sm margin-top-none">
<thead>
<tr>
<th>Parameter type</th>
<th>fifth and higher</th>
<th>fourth</th>
<th>third</th>
<th>second</th>
<th>leftmost</th>
</tr>
</thead>
<tbody>
<tr>
<td>floating-point</td>
<td>stack</td>
<td>XMM3</td>
<td>XMM2</td>
<td>XMM1</td>
<td>XMM0</td>
</tr>
<tr>
<td>integer</td>
<td>stack</td>
<td>R9</td>
<td>R8</td>
<td>RDX</td>
<td>RCX</td>
</tr>
<tr>
<td>Aggregates (8, 16, 32, or 64 bits) and <strong><code>__m64</code></strong></td>
<td>stack</td>
<td>R9</td>
<td>R8</td>
<td>RDX</td>
<td>RCX</td>
</tr>
<tr>
<td>Other aggregates, as pointers</td>
<td>stack</td>
<td>R9</td>
<td>R8</td>
<td>RDX</td>
<td>RCX</td>
</tr>
<tr>
<td><strong><code>__m128</code></strong>, as a pointer</td>
<td>stack</td>
<td>R9</td>
<td>R8</td>
<td>RDX</td>
<td>RCX</td>
</tr>
</tbody>
</table></div>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-argument-passing-1---all-integers" aria-label="Section titled: Example of argument passing 1 - all integers"></a><h3 id="example-of-argument-passing-1---all-integers" class="heading-anchor">Example of argument passing 1 - all integers</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-0" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span>func1(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> d, <span class="hljs-keyword">int</span> e, <span class="hljs-keyword">int</span> f);
<span class="hljs-comment">// a in RCX, b in RDX, c in R8, d in R9, f then e passed on stack</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-argument-passing-2---all-floats" aria-label="Section titled: Example of argument passing 2 - all floats"></a><h3 id="example-of-argument-passing-2---all-floats" class="heading-anchor">Example of argument passing 2 - all floats</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-1" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span>func2(<span class="hljs-keyword">float</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">float</span> c, <span class="hljs-keyword">double</span> d, <span class="hljs-keyword">float</span> e, <span class="hljs-keyword">float</span> f);
<span class="hljs-comment">// a in XMM0, b in XMM1, c in XMM2, d in XMM3, f then e passed on stack</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-argument-passing-3---mixed-ints-and-floats" aria-label="Section titled: Example of argument passing 3 - mixed ints and floats"></a><h3 id="example-of-argument-passing-3---mixed-ints-and-floats" class="heading-anchor">Example of argument passing 3 - mixed ints and floats</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-2" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span>func3(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">float</span> d, <span class="hljs-keyword">int</span> e, <span class="hljs-keyword">float</span> f);
<span class="hljs-comment">// a in RCX, b in XMM1, c in R8, d in XMM3, f then e passed on stack</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-argument-passing-4---__m64-__m128-and-aggregates" aria-label="Section titled: Example of argument passing 4 - __m64, __m128, and aggregates"></a><h3 id="example-of-argument-passing-4---__m64-__m128-and-aggregates" class="heading-anchor">Example of argument passing 4 - <code>__m64</code>, <code>__m128</code>, and aggregates</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-3" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span>func4(__m64 a, __m128 b, struct c, <span class="hljs-keyword">float</span> d, __m128 e, __m128 f);
<span class="hljs-comment">// a in RCX, ptr to b in RDX, ptr to c in R8, d in XMM3,</span>
<span class="hljs-comment">// ptr to f passed on stack, then ptr to e passed on stack</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#varargs" aria-label="Section titled: Varargs"></a><h2 id="varargs" class="heading-anchor">Varargs</h2></div>
<p>If parameters are passed via varargs (for example, ellipsis arguments), then the normal register parameter passing convention applies. That convention includes spilling the fifth and later arguments to the stack. It's the callee's responsibility to dump arguments that have their address taken. For floating-point values only, both the integer register and the floating-point register must contain the value, in case the callee expects the value in the integer registers.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#unprototyped-functions" aria-label="Section titled: Unprototyped functions"></a><h2 id="unprototyped-functions" class="heading-anchor">Unprototyped functions</h2></div>
<p>For functions not fully prototyped, the caller passes integer values as integers and floating-point values as double precision. For floating-point values only, both the integer register and the floating-point register contain the float value in case the callee expects the value in the integer registers.</p>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-4" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="c"><code class="lang-c"><span>func1();
func2() {   <span class="hljs-comment">// RCX = 2, RDX = XMM1 = 1.0, and R8 = 7</span>
   func1(<span class="hljs-number">2</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">7</span>);
}
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#return-values" aria-label="Section titled: Return values"></a><h2 id="return-values" class="heading-anchor">Return values</h2></div>
<p>A scalar return value that can fit into 64 bits, including the <code>__m64</code> type, is returned through RAX. Nonscalar types including floats, doubles, and vector types such as <a href="https://learn.microsoft.com/en-us/cpp/cpp/m128?view=msvc-170" data-linktype="relative-path"><code>__m128</code></a>, <a href="https://learn.microsoft.com/en-us/cpp/cpp/m128i?view=msvc-170" data-linktype="relative-path"><code>__m128i</code></a>, <a href="https://learn.microsoft.com/en-us/cpp/cpp/m128d?view=msvc-170" data-linktype="relative-path"><code>__m128d</code></a> are returned in XMM0. The state of unused bits in the value returned in RAX or XMM0 is undefined.</p>
<p>User-defined types can be returned by value from global functions and static member functions. To return a user-defined type by value in RAX, it must have a length of 1, 2, 4, 8, 16, 32, or 64 bits. It must also have no user-defined constructor, destructor, or copy assignment operator. It can have no private or protected nonstatic data members, and no nonstatic data members of reference type. It can't have base classes or virtual functions. And, it can only have data members that also meet these requirements. This definition is essentially the same as a C++03 POD type. Because the definition has changed in the C++11 standard, we don't recommend using <code>std::is_pod</code> for this test. Otherwise, the caller must allocate memory for the return value and pass a pointer to it as the first argument. The remaining arguments are then shifted one argument to the right. The same pointer must be returned by the callee in RAX.</p>
<p>These examples show how parameters and return values are passed for functions with the specified declarations:</p>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-return-value-1---64-bit-result" aria-label="Section titled: Example of return value 1 - 64-bit result"></a><h3 id="example-of-return-value-1---64-bit-result" class="heading-anchor">Example of return value 1 - 64-bit result</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-5" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span>__<span class="hljs-function">int64 <span class="hljs-title">func1</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">float</span> b, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> d, <span class="hljs-keyword">int</span> e)</span></span>;
<span class="hljs-comment">// Caller passes a in RCX, b in XMM1, c in R8, d in R9, e passed on stack,</span>
<span class="hljs-comment">// callee returns __int64 result in RAX.</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-return-value-2---128-bit-result" aria-label="Section titled: Example of return value 2 - 128-bit result"></a><h3 id="example-of-return-value-2---128-bit-result" class="heading-anchor">Example of return value 2 - 128-bit result</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-6" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span>__<span class="hljs-function">m128 <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-keyword">float</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">int</span> c, __m64 d)</span></span>;
<span class="hljs-comment">// Caller passes a in XMM0, b in XMM1, c in R8, d in R9,</span>
<span class="hljs-comment">// callee returns __m128 result in XMM0.</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-return-value-3---user-type-result-by-pointer" aria-label="Section titled: Example of return value 3 - user type result by pointer"></a><h3 id="example-of-return-value-3---user-type-result-by-pointer" class="heading-anchor">Example of return value 3 - user type result by pointer</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-7" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Struct1</span> {</span>
   <span class="hljs-keyword">int</span> j, k, l;    <span class="hljs-comment">// Struct1 exceeds 64 bits.</span>
};
<span class="hljs-function">Struct1 <span class="hljs-title">func3</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">float</span> d)</span></span>;
<span class="hljs-comment">// Caller allocates memory for Struct1 returned and passes pointer in RCX,</span>
<span class="hljs-comment">// a in RDX, b in XMM2, c in R9, d passed on the stack;</span>
<span class="hljs-comment">// callee returns pointer to Struct1 result in RAX.</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h3"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#example-of-return-value-4---user-type-result-by-value" aria-label="Section titled: Example of return value 4 - user type result by value"></a><h3 id="example-of-return-value-4---user-type-result-by-value" class="heading-anchor">Example of return value 4 - user type result by value</h3></div>
<div class="code-block-header margin-top-sm" data-code-block-header="" id="code-try-8" data-bi-name="code-header"><!---->
		<span class="code-block-header-language"><!---->C++<!----></span>
		
		<button type="button" class="button button-sm action inner-focus display-none-print" data-bi-name="copy" data-code-header-copy-button="">
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-copy overflow-hidden"></span>
				<span data-copy-button-success-indicator="" class="successful-copy-alert position-absolute is-transparent docon docon-check-mark"></span>
			</span>
			<span><!---->Copy<!----></span>
		</button>
	
		
	<!----></div><pre class="inner-focus" data-language="cpp"><code class="lang-cpp"><span><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Struct2</span> {</span>
   <span class="hljs-keyword">int</span> j, k;    <span class="hljs-comment">// Struct2 fits in 64 bits, and meets requirements for return by value.</span>
};
<span class="hljs-function">Struct2 <span class="hljs-title">func4</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">float</span> d)</span></span>;
<span class="hljs-comment">// Caller passes a in RCX, b in XMM1, c in R8, and d in XMM3;</span>
<span class="hljs-comment">// callee returns Struct2 result by value in RAX.</span>
</span></code></pre>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#callercallee-saved-registers" aria-label="Section titled: Caller/callee saved registers"></a><h2 id="callercallee-saved-registers" class="heading-anchor">Caller/callee saved registers</h2></div>
<p>The x64 ABI considers the registers RAX, RCX, RDX, R8, R9, R10, R11, and XMM0-XMM5 volatile. When present, the upper portions of YMM0-YMM15 and ZMM0-ZMM15 are also volatile. On AVX512VL, the ZMM, YMM, and XMM registers 16-31 are also volatile. When AMX support is present, the TMM tile registers are volatile. Consider volatile registers destroyed on function calls unless otherwise safety-provable by analysis such as whole program optimization.</p>
<p>The x64 ABI considers registers RBX, RBP, RDI, RSI, RSP, R12, R13, R14, R15, and XMM6-XMM15 nonvolatile. They must be saved and restored by a function that uses them.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#function-pointers" aria-label="Section titled: Function pointers"></a><h2 id="function-pointers" class="heading-anchor">Function pointers</h2></div>
<p>Function pointers are simply pointers to the label of the respective function. There's no table of contents (TOC) requirement for function pointers.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#floating-point-support-for-older-code" aria-label="Section titled: Floating-point support for older code"></a><h2 id="floating-point-support-for-older-code" class="heading-anchor">Floating-point support for older code</h2></div>
<p>The MMX and floating-point stack registers (MM0-MM7/ST0-ST7) are preserved across context switches. There's no explicit calling convention for these registers. The use of these registers is strictly prohibited in kernel mode code.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#fpcsr" aria-label="Section titled: FPCSR"></a><h2 id="fpcsr" class="heading-anchor">FPCSR</h2></div>
<p>The register state also includes the x87 FPU control word. The calling convention dictates this register to be nonvolatile.</p>
<p>The x87 FPU control word register gets set using the following standard values at the start of program execution:</p>
<div class="buttons buttons-right margin-bottom-none margin-top-sm"><!----> <button class="button button-clear button-sm display-flex gap-xxs">
		<span class="icon" aria-hidden="true">
			<span class="docon docon-expand color-primary"></span>
		</span>
		<span><!---->Expand table<!----></span>
	</button><!----></div><div class="inner-focus"><table aria-label="FPCSR" class="table table-sm margin-top-none">
<thead>
<tr>
<th>Register[bits]</th>
<th>Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td>FPCSR[0:6]</td>
<td>Exception masks all 1s (all exceptions masked)</td>
</tr>
<tr>
<td>FPCSR[7]</td>
<td>Reserved - 0</td>
</tr>
<tr>
<td>FPCSR[8:9]</td>
<td>Precision Control - 10B (double precision)</td>
</tr>
<tr>
<td>FPCSR[10:11]</td>
<td>Rounding  control - 0 (round to nearest)</td>
</tr>
<tr>
<td>FPCSR[12]</td>
<td>Infinity control - 0 (not used)</td>
</tr>
</tbody>
</table></div>
<p>A callee that modifies any of the fields within FPCSR must restore them before returning to its caller. Furthermore, a caller that has modified any of these fields must restore them to their standard values before invoking a callee, unless by agreement the callee expects the modified values.</p>
<p>There are two exceptions to the rules about the nonvolatility of the control flags:</p>
<ul>
<li><p>In functions where the documented purpose of the given function is to modify the nonvolatile FPCSR flags.</p>
</li>
<li><p>When it's provably correct that the violation of these rules results in a program that behaves the same as a program that doesn't violate the rules, for example, through whole-program analysis.</p>
</li>
</ul>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#mxcsr" aria-label="Section titled: MXCSR"></a><h2 id="mxcsr" class="heading-anchor">MXCSR</h2></div>
<p>The register state also includes MXCSR. The calling convention divides this register into a volatile portion and a nonvolatile portion. The volatile portion consists of the six status flags, in MXCSR[0:5], while the rest of the register, MXCSR[6:15], is considered nonvolatile.</p>
<p>The nonvolatile portion is set to the following standard values at the start of program execution:</p>
<div class="buttons buttons-right margin-bottom-none margin-top-sm"><!----> <button class="button button-clear button-sm display-flex gap-xxs">
		<span class="icon" aria-hidden="true">
			<span class="docon docon-expand color-primary"></span>
		</span>
		<span><!---->Expand table<!----></span>
	</button><!----></div><div class="inner-focus"><table aria-label="MXCSR" class="table table-sm margin-top-none">
<thead>
<tr>
<th>Register[bits]</th>
<th>Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td>MXCSR[6]</td>
<td>Denormals are zeros - 0</td>
</tr>
<tr>
<td>MXCSR[7:12]</td>
<td>Exception masks all 1s (all exceptions masked)</td>
</tr>
<tr>
<td>MXCSR[13:14]</td>
<td>Rounding  control - 0 (round to nearest)</td>
</tr>
<tr>
<td>MXCSR[15]</td>
<td>Flush to zero for masked underflow - 0 (off)</td>
</tr>
</tbody>
</table></div>
<p>A callee that modifies any of the nonvolatile fields within MXCSR must restore them before returning to its caller. Furthermore, a caller that has modified any of these fields must restore them to their standard values before invoking a callee, unless by agreement the callee expects the modified values.</p>
<p>There are two exceptions to the rules about the nonvolatility of the control flags:</p>
<ul>
<li><p>In functions where the documented purpose of the given function is to modify the nonvolatile MXCSR flags.</p>
</li>
<li><p>When it's provably correct that the violation of these rules results in a program that behaves the same as a program that doesn't violate the rules, for example, through whole-program analysis.</p>
</li>
</ul>
<p>Make no assumptions about the MXCSR register's volatile portion state across a function boundary, unless the function documentation explicitly describes it.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#setjmplongjmp" aria-label="Section titled: setjmp/longjmp"></a><h2 id="setjmplongjmp" class="heading-anchor">setjmp/longjmp</h2></div>
<p>When you include <code>setjmpex.h</code> or <code>setjmp.h</code>, all calls to <a href="https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/setjmp?view=msvc-170" data-linktype="relative-path"><code>setjmp</code></a> or <a href="https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/longjmp?view=msvc-170" data-linktype="relative-path"><code>longjmp</code></a> result in an unwind that invokes destructors and <code>__finally</code> calls. This behavior differs from x86, where including <code>setjmp.h</code> results in <code>__finally</code> clauses and destructors not being invoked.</p>
<p>A call to <code>setjmp</code> preserves the current stack pointer, nonvolatile registers, and MXCSR registers. Calls to <code>longjmp</code> return to the most recent <code>setjmp</code> call site and resets the stack pointer, nonvolatile registers, and MXCSR registers, back to the state as preserved by the most recent <code>setjmp</code> call.</p>
<div class="heading-wrapper" data-heading-level="h2"><a class="anchor-link docon docon-link" href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#see-also" aria-label="Section titled: See also"></a><h2 id="see-also" class="heading-anchor">See also</h2></div>
<ul>
<li><a href="https://learn.microsoft.com/en-us/cpp/build/x64-software-conventions?view=msvc-170" data-linktype="relative-path">Overview of x64 ABI conventions</a></li>
</ul>
</div>
					
		<div id="ms--inline-notifications" class="margin-block-xs" data-bi-name="inline-notification"></div>
	 
		<div id="assertive-live-region" role="alert" aria-live="assertive" class="visually-hidden" aria-relevant="additions" aria-atomic="true"></div>
		<div id="polite-live-region" role="status" aria-live="polite" class="visually-hidden" aria-relevant="additions" aria-atomic="true"></div>
	
					
		<!-- feedback section -->
		<section id="site-user-feedback-footer" class="font-size-sm margin-top-md display-none-print display-none-desktop" data-test-id="site-user-feedback-footer" data-bi-name="site-feedback-section">
			<hr class="hr">
			<h2 id="ms--feedback" class="title is-3">Feedback</h2>
			<div class="display-flex flex-wrap-wrap align-items-center">
				<p class="font-weight-semibold margin-xxs margin-left-none">
					Was this page helpful?
				</p>
				<div class="buttons">
					<button class="thumb-rating-button like button button-primary button-sm" data-test-id="footer-rating-yes" data-binary-rating-response="rating-yes" type="button" title="This article is helpful" data-bi-name="button-rating-yes" aria-pressed="false">
						<span class="icon" aria-hidden="true">
							<span class="docon docon-like"></span>
						</span>
						<span>Yes</span>
					</button>
					<button class="thumb-rating-button dislike button button-primary button-sm" id="standard-rating-no-button" data-test-id="footer-rating-no" data-binary-rating-response="rating-no" type="button" title="This article is not helpful" data-bi-name="button-rating-no" aria-pressed="false">
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</button>
					<details class="popover popover-top" id="mobile-help-popover" data-test-id="footer-feedback-popover">
						<summary class="thumb-rating-button dislike button button-primary button-sm" data-test-id="details-footer-rating-no" data-binary-rating-response="rating-no" title="This article is not helpful" data-bi-name="button-rating-no" aria-pressed="false" data-bi-an="feedback-unhelpful-popover">
							<span class="icon" aria-hidden="true">
								<span class="docon docon-dislike"></span>
							</span>
							<span>No</span>
						</summary>
						<div class="popover-content width-200 width-300-tablet" role="dialog" aria-labelledby="popover-heading" aria-describedby="popover-description">
							<p id="popover-heading" class="font-size-lg margin-bottom-xxs font-weight-semibold">
								Need help with this topic?
							</p>
							<p id="popover-description" class="font-size-sm margin-bottom-xs">
								Want to try using Ask Learn to clarify or guide you through this topic?
							</p>
							
		<div class="buttons flex-direction-row flex-wrap justify-content-center gap-xxs">
			<div>
		<button class="button button-sm border inner-focus display-none margin-right-xxs" data-bi-name="ask-learn-assistant-entry-troubleshoot" data-test-id="ask-learn-assistant-modal-entry-mobile-feedback" data-ask-learn-modal-entry-feedback="" data-bi-an="feedback-unhelpful-popover" type="button" style="min-width: max-content;" aria-expanded="false" aria-label="Ask Learn">
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button class="button button-sm display-inline-flex display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn margin-right-xxs" data-bi-name="ask-learn-assistant-entry-troubleshoot" data-bi-an="feedback-unhelpful-popover" data-test-id="ask-learn-assistant-modal-entry-tablet-feedback" data-ask-learn-modal-entry-feedback="" type="button" style="min-width: max-content;" aria-expanded="false">
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn margin-right-xxs" data-bi-name="ask-learn-assistant-entry-troubleshoot" data-bi-an="feedback-unhelpful-popover" data-test-id="ask-learn-assistant-flyout-entry-feedback" data-ask-learn-flyout-entry-show-only="" data-flyout-button="toggle" type="button" style="min-width: max-content;" aria-expanded="false" aria-controls="ask-learn-flyout">
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	</div>
			<button type="button" class="button button-sm margin-right-xxs" data-help-option="suggest-fix" data-bi-name="feedback-suggest" data-bi-an="feedback-unhelpful-popover" data-test-id="suggest-fix">
				<span class="icon" aria-hidden="true">
					<span class="docon docon-feedback"></span>
				</span>
				<span> Suggest a fix? </span>
			</button>
		</div>
	
						</div>
					</details>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
				</div>
				
		<div id="ms--additional-resources-mobile" class="display-none-print">
			<hr class="hr">
			<h2 id="ms--additional-resources-mobile-heading" class="title is-3">
				Additional resources
			</h2>
			
		<section id="right-rail-recommendations-mobile" class="" data-bi-name="recommendations"></section>
	 
		<section id="right-rail-training-mobile" class="" data-bi-name="learning-resource-card"></section>
	 
		<section id="right-rail-events-mobile" class="" data-bi-name="events-card"></section>
	 
		<section id="right-rail-qna-mobile" class="margin-top-xxs" data-bi-name="qna-link-card"></section>
	
		</div>
	 
		<div id="article-metadata-footer" data-bi-name="article-metadata-footer" data-test-id="article-metadata-footer" class="page-metadata-container">
			<hr class="hr">
			<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
				<li class="visibility-hidden-visual-diff">
			<span class="badge badge-sm text-wrap-pretty">
				<span>Last updated on <local-time format="twoDigitNumeric" datetime="2025-07-26T05:04:00.000Z" data-article-date-source="calculated" class="">07/26/2025</local-time></span>
			</span>
		</li>
			</ul>
		</div>
	
			</div>
			
		<div id="action-panel" role="region" aria-label="Action Panel" class="action-panel" tabindex="-1"></div>
	
		
				</main>
				 <section id="layout-body-flyout" class="layout-body-flyout " data-bi-name="flyout">
					 <div class="height-full border-left background-color-body-medium" id="ask-learn-flyout"><!---->
		<article class="chat-container  position-sticky top-0 " data-chat-container-name="ask-learn-flyout" data-test-id="chat-login-ask-learn-flyout">
			<div class="chat-container-header">
				
			</div>
			<div class="text-align-center padding-top-xl padding-inline-md">
				<p class="margin-bottom-lg"><!---->Ask Learn is an AI assistant that can answer questions, clarify concepts, and define terms using trusted Microsoft documentation.<!----></p>
				<p class="margin-bottom-lg"><!---->Please sign in to use Ask Learn.<!----></p>
				<a href="https://learn.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-170#" class="docs-sign-in button button-primary button-filled button-sm">
					Sign in
				</a>
			</div>
		</article>
	<!----></div>
			  </section> <div class="layout-body-footer " data-bi-name="layout-footer">
		
	
			
		</div></body></html>