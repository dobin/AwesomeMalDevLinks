Title:
Tradecraft Garden – Crystal Palace Documentation

Type:
Documentation

Short Summary (4–8 sentences max):
- This documentation describes Crystal Palace, a Java-based linker and linker-script language designed to build and transform position-independent code (PIC) and “PICO” COFF containers for offensive tradecraft.  
- It focuses on separating “capability” (payload logic in DLL/COFF) from “tradecraft” (load-time and run-time evasion, API resolution, hooking, resource handling) so components can be recombined per operation.  
- The spec language supports appending and transforming resources (masking/XOR, RC4, length/checksum prefixes), patching symbols, and composing modules via callable labels, variables, and config overlays.  
- It provides PIC/PICO ergonomics such as dynamic Win32 API resolution (EAT walking via ror13 hashes or string-based resolvers), x86 pointer-fixing for data references, and optional .bss restoration for globals.  
- It also includes instrumentation primitives (attach/redirect weaving, IAT hook registration/filtering) plus binary transformations (LTO, function/block shuffling, mutation, register shuffling) and a Yara rule generator for invariant code regions.  
- Useful primarily for red teams, exploit/payload developers, and security researchers building custom loaders, BOF-like artifacts, and modular tradecraft pipelines; also relevant to blue teams for understanding emerging loader patterns and signature generation constraints.

Technical Focus:
- Position-independent code (PIC) and COFF-based “PICO” container conventions
- Linker-script/spec-driven composition (stack machine, $byte[] vars, %string vars, modular labels)
- Win32 API resolution (DFR, EAT walking, ror13 hashing, MODULE$Function convention)
- Loader tradecraft: resource embedding, encryption/masking, pointer patching, guardrails
- Hooking/instrumentation: attach/redirect weaving, IAT hook resolution, hook filtering
- Binary transformations + Yara rule generation (LTO, shuffling, mutation, regdance)

Use Cases:
- Build memory-injected DLL loaders with swappable evasion and runtime behavior modules
- Package and run COFF payloads (BOF-like) with custom import resolution and controlled memory layout
- Embed multi-stage resources (encrypted/configured blobs) and access them as linked symbols in PIC
- Apply link-time transformations (function order randomization, mutation) to diversify artifacts
- Generate Yara rules for stable portions of PIC/PICO code for testing/detection research
- Create modular tradecraft “recipes” via spec templates, config overlays, and callable labels

Keywords:
Crystal Palace, Tradecraft Garden, position-independent code, PIC, COFF, PICO, linker script, spec language, reflective DLL loading, memory injection, Win32 API resolution, Export Address Table, ror13 hashing, MODULE$Function, IAT hooking, attach, redirect, aspect-oriented programming, RC4, XOR masking, Adler-32, VirtualAlloc, GetProcAddress, LoadLibraryA, Yara rule generation, link-time optimization, code mutation, function shuffling, register shuffling, MinGW-w64, WSL, Java API